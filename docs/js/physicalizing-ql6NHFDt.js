import{g as b,e as z,c as I,a as k,S as A}from"./swiper-CFnvug-O.js";import{s as F}from"./loadLocomotive-DUo0yfuB.js";function U(e){const{effect:a,swiper:t,on:o,setTranslate:p,setTransition:l,overwriteParams:s,perspective:f,recreateShadows:n,getEffectParams:r}=e;o("beforeInit",()=>{if(t.params.effect!==a)return;t.classNames.push(`${t.params.containerModifierClass}${a}`),f&&f()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=s?s():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),o("setTranslate _virtualUpdated",()=>{t.params.effect===a&&p()}),o("setTransition",(d,u)=>{t.params.effect===a&&l(u)}),o("transitionEnd",()=>{if(t.params.effect===a&&n){if(!r||!r().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>u.remove())}),n()}});let c;o("virtualUpdate",()=>{t.params.effect===a&&(t.slides.length||(c=!0),requestAnimationFrame(()=>{c&&t.slides&&t.slides.length&&(p(),c=!1)}))})}function D(e,a){const t=b(a);return t!==a&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function N({swiper:e,duration:a,transformElements:t,allSlides:o}){const{activeIndex:p}=e;if(e.params.virtualTranslate&&a!==0){let l=!1,s;s=t,s.forEach(f=>{z(f,()=>{if(l||!e||e.destroyed)return;l=!0,e.animating=!1;const n=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(n)})})}}function R(e,a,t){const o=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,p=b(a);let l=p.querySelector(`.${o.split(" ").join(".")}`);return l||(l=I("div",o.split(" ")),p.append(l)),l}function X({swiper:e,extendParams:a,on:t}){a({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const o=s=>typeof s=="string"?s:`${s}px`;U({effect:"creative",swiper:e,on:t,setTranslate:()=>{const{slides:s,wrapperEl:f,slidesSizesGrid:n}=e,r=e.params.creativeEffect,{progressMultiplier:c}=r,d=e.params.centeredSlides,u=k(e);if(d){const y=n[0]/2-e.params.slidesOffsetBefore||0;f.style.transform=`translateX(calc(50% - ${y}px))`}for(let y=0;y<s.length;y+=1){const m=s[y],T=m.progress,g=Math.min(Math.max(m.progress,-r.limitProgress),r.limitProgress);let h=g;d||(h=Math.min(Math.max(m.originalProgress,-r.limitProgress),r.limitProgress));const M=m.swiperSlideOffset,w=[e.params.cssMode?-M-e.translate:-M,0,0],S=[0,0,0];let $=!1;e.isHorizontal()||(w[1]=w[0],w[0]=0);let i={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};g<0?(i=r.next,$=!0):g>0&&(i=r.prev,$=!0),w.forEach((v,E)=>{w[E]=`calc(${v}px + (${o(i.translate[E])} * ${Math.abs(g*c)}))`}),S.forEach((v,E)=>{let j=i.rotate[E]*Math.abs(g*c);S[E]=j}),m.style.zIndex=-Math.abs(Math.round(T))+s.length;const x=w.join(", "),C=`rotateX(${u(S[0])}deg) rotateY(${u(S[1])}deg) rotateZ(${u(S[2])}deg)`,O=h<0?`scale(${1+(1-i.scale)*h*c})`:`scale(${1-(1-i.scale)*h*c})`,q=h<0?1+(1-i.opacity)*h*c:1-(1-i.opacity)*h*c,V=`translate3d(${x}) ${C} ${O}`;if($&&i.shadow||!$){let v=m.querySelector(".swiper-slide-shadow");if(!v&&i.shadow&&(v=R("creative",m)),v){const E=r.shadowPerProgress?g*(1/r.limitProgress):g;v.style.opacity=Math.min(Math.max(Math.abs(E),0),1)}}const P=D(r,m);P.style.transform=V,P.style.opacity=q,i.origin&&(P.style.transformOrigin=i.origin)}},setTransition:s=>{const f=e.slides.map(n=>b(n));f.forEach(n=>{n.style.transitionDuration=`${s}ms`,n.querySelectorAll(".swiper-slide-shadow").forEach(r=>{r.style.transitionDuration=`${s}ms`})}),N({swiper:e,duration:s,transformElements:f,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}const _=()=>{new A(".swiper",{modules:[X],direction:"horizontal",slidesPerView:"auto",grabCursor:!0,centeredSlides:!0,effect:"creative",creativeEffect:{prev:{translate:["-130%",40,-200],rotate:[0,0,-10],scale:.8},next:{translate:["130%",40,-200],rotate:[0,0,10],scale:.8}}})};function H(){_(),F()}export{H as init};
