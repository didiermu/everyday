import{g as T,e as k,c as A,a as F,S as U}from"./swiper-CFnvug-O.js";import{s as D}from"./loadLocomotive-DUo0yfuB.js";function N(e){const{effect:a,swiper:t,on:o,setTranslate:p,setTransition:l,overwriteParams:s,perspective:f,recreateShadows:n,getEffectParams:r}=e;o("beforeInit",()=>{if(t.params.effect!==a)return;t.classNames.push(`${t.params.containerModifierClass}${a}`),f&&f()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=s?s():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),o("setTranslate _virtualUpdated",()=>{t.params.effect===a&&p()}),o("setTransition",(d,u)=>{t.params.effect===a&&l(u)}),o("transitionEnd",()=>{if(t.params.effect===a&&n){if(!r||!r().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>u.remove())}),n()}});let c;o("virtualUpdate",()=>{t.params.effect===a&&(t.slides.length||(c=!0),requestAnimationFrame(()=>{c&&t.slides&&t.slides.length&&(p(),c=!1)}))})}function R(e,a){const t=T(a);return t!==a&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function X({swiper:e,duration:a,transformElements:t,allSlides:o}){const{activeIndex:p}=e;if(e.params.virtualTranslate&&a!==0){let l=!1,s;s=t,s.forEach(f=>{k(f,()=>{if(l||!e||e.destroyed)return;l=!0,e.animating=!1;const n=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(n)})})}}function _(e,a,t){const o=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,p=T(a);let l=p.querySelector(`.${o.split(" ").join(".")}`);return l||(l=A("div",o.split(" ")),p.append(l)),l}function B({swiper:e,extendParams:a,on:t}){a({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const o=s=>typeof s=="string"?s:`${s}px`;N({effect:"creative",swiper:e,on:t,setTranslate:()=>{const{slides:s,wrapperEl:f,slidesSizesGrid:n}=e,r=e.params.creativeEffect,{progressMultiplier:c}=r,d=e.params.centeredSlides,u=F(e);if(d){const E=n[0]/2-e.params.slidesOffsetBefore||0;f.style.transform=`translateX(calc(50% - ${E}px))`}for(let E=0;E<s.length;E+=1){const m=s[E],C=m.progress,g=Math.min(Math.max(m.progress,-r.limitProgress),r.limitProgress);let h=g;d||(h=Math.min(Math.max(m.originalProgress,-r.limitProgress),r.limitProgress));const x=m.swiperSlideOffset,w=[e.params.cssMode?-x-e.translate:-x,0,0],S=[0,0,0];let $=!1;e.isHorizontal()||(w[1]=w[0],w[0]=0);let i={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};g<0?(i=r.next,$=!0):g>0&&(i=r.prev,$=!0),w.forEach((v,y)=>{w[y]=`calc(${v}px + (${o(i.translate[y])} * ${Math.abs(g*c)}))`}),S.forEach((v,y)=>{let z=i.rotate[y]*Math.abs(g*c);S[y]=z}),m.style.zIndex=-Math.abs(Math.round(C))+s.length;const O=w.join(", "),q=`rotateX(${u(S[0])}deg) rotateY(${u(S[1])}deg) rotateZ(${u(S[2])}deg)`,I=h<0?`scale(${1+(1-i.scale)*h*c})`:`scale(${1-(1-i.scale)*h*c})`,V=h<0?1+(1-i.opacity)*h*c:1-(1-i.opacity)*h*c,j=`translate3d(${O}) ${q} ${I}`;if($&&i.shadow||!$){let v=m.querySelector(".swiper-slide-shadow");if(!v&&i.shadow&&(v=_("creative",m)),v){const y=r.shadowPerProgress?g*(1/r.limitProgress):g;v.style.opacity=Math.min(Math.max(Math.abs(y),0),1)}}const M=R(r,m);M.style.transform=j,M.style.opacity=V,i.origin&&(M.style.transformOrigin=i.origin)}},setTransition:s=>{const f=e.slides.map(n=>T(n));f.forEach(n=>{n.style.transitionDuration=`${s}ms`,n.querySelectorAll(".swiper-slide-shadow").forEach(r=>{r.style.transitionDuration=`${s}ms`})}),X({swiper:e,duration:s,transformElements:f,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}let P=null,b=null;const G=()=>{b=new U(".swiper",{modules:[B],direction:"horizontal",slidesPerView:"auto",grabCursor:!0,centeredSlides:!0,effect:"creative",creativeEffect:{prev:{translate:["-130%",40,-200],rotate:[0,0,-10],scale:.8},next:{translate:["130%",40,-200],rotate:[0,0,10],scale:.8}}})};function Z(){G(),P=D()}function J(){b&&(b.destroy(!0,!0),b=null),P&&(P.destroy(),P=null)}export{J as destroy,Z as init};
